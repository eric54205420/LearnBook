<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_19) on Fri Aug 02 14:56:57 CST 2013 -->
<META http-equiv="Content-Type" content="text/html; charset=GB18030">
<TITLE>
GenericDbLogin (TASK API)
</TITLE>

<META NAME="keywords" CONTENT="com.amarsoft.task.security.login.GenericDbLogin class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="GenericDbLogin (TASK API)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GenericDbLogin.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/amarsoft/task/security/login/AnonymousLogin.html" title="class in com.amarsoft.task.security.login"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GenericDbLogin.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.amarsoft.task.security.login</FONT>
<BR>
Class GenericDbLogin</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html" title="class in com.amarsoft.task.security.login">com.amarsoft.task.security.login.AbstractAccountPasswordLogin</A>
      <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by"><B>com.amarsoft.task.security.login.GenericDbLogin</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../com/amarsoft/task/security/LoginModule.html" title="interface in com.amarsoft.task.security">LoginModule</A></DD>
</DL>
<HR>
<DL>
<DT>public class <B>GenericDbLogin</B><DT>extends <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html" title="class in com.amarsoft.task.security.login">AbstractAccountPasswordLogin</A></DL>

<P>
通用的数据库登录类，通过设置一系列的数据库属性来实现系统登录；
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>tzhai</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#GenericDbLogin()">GenericDbLogin</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getAccountColumn()">getAccountColumn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取登录帐号字段。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getDatabase()">getDatabase</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取用户存放数据库,是ARE DBService的逻辑数据库</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getDbEncoding()">getDbEncoding</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取数据库的编码格式</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getIdColumn()">getIdColumn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取user id的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getNameColumn()">getNameColumn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取用户名称的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getPasswordColumn()">getPasswordColumn</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取用户密码的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getPropertyColumns()">getPropertyColumns</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取用户属性的字段列表。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getQuerySql()">getQuerySql</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;根据配置的参数获取查询数据库的语句。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getTable()">getTable</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取存放用户信息的表</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#getValidAccountFilter()">getValidAccountFilter</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取有效帐号状态过滤器，过滤器应该是一个合法的sql条件。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#isValidUser(java.lang.String, java.lang.String, java.lang.String, com.amarsoft.task.security.TaskUser)">isValidUser</A></B>(java.lang.String&nbsp;loginAccount,
            java.lang.String&nbsp;loginPassword,
            java.lang.String&nbsp;dbPassword,
            <A HREF="../../../../../com/amarsoft/task/security/TaskUser.html" title="interface in com.amarsoft.task.security">TaskUser</A>&nbsp;tempUser)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;确定该帐号是否合法，需要根据登录输入的帐户、登录输入的密码和数据库中的密码，数据库中用的信息（存放在tempUser中）确定是否合法。
 </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../../com/amarsoft/task/security/TaskUser.html" title="interface in com.amarsoft.task.security">TaskUser</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#login(com.amarsoft.task.Task, java.lang.String, java.lang.String)">login</A></B>(<A HREF="../../../../../com/amarsoft/task/Task.html" title="class in com.amarsoft.task">Task</A>&nbsp;task,
      java.lang.String&nbsp;account,
      java.lang.String&nbsp;password)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用帐号户和密码登录到系统，传入的参数包括帐号，密码，密码的加密形式</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setAccountColumn(java.lang.String)">setAccountColumn</A></B>(java.lang.String&nbsp;accountColumn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置登录帐号字段。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setDatabase(java.lang.String)">setDatabase</A></B>(java.lang.String&nbsp;database)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置用户存放数据库,是ARE DBService的逻辑数据库</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setDbEncoding(java.lang.String)">setDbEncoding</A></B>(java.lang.String&nbsp;dbEncoding)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置数据库的编码格式</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setIdColumn(java.lang.String)">setIdColumn</A></B>(java.lang.String&nbsp;idColumn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置user id的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setNameColumn(java.lang.String)">setNameColumn</A></B>(java.lang.String&nbsp;nameColumn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置用户名称的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setPasswordColumn(java.lang.String)">setPasswordColumn</A></B>(java.lang.String&nbsp;passwordColumn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置用户密码的字段</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setPropertyColumns(java.lang.String)">setPropertyColumns</A></B>(java.lang.String&nbsp;propertyColumns)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置用户属性的字段列表。</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setTable(java.lang.String)">setTable</A></B>(java.lang.String&nbsp;table)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置存放用户信息的表</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/amarsoft/task/security/login/GenericDbLogin.html#setValidAccountFilter(java.lang.String)">setValidAccountFilter</A></B>(java.lang.String&nbsp;validAccountFilter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;设置有效帐号状态过滤器，过滤器应该是一个合法的sql条件。</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.amarsoft.task.security.login.AbstractAccountPasswordLogin"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class com.amarsoft.task.security.login.<A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html" title="class in com.amarsoft.task.security.login">AbstractAccountPasswordLogin</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#encrypt(byte[])">encrypt</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#encrypt(java.lang.String)">encrypt</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#getAccountPrompt()">getAccountPrompt</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#getEncryptString(java.lang.String)">getEncryptString</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#getMaxRetryTimes()">getMaxRetryTimes</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#getPasswordAlgorithm()">getPasswordAlgorithm</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#getPasswordPrompt()">getPasswordPrompt</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#login(com.amarsoft.task.Task)">login</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#setAccountPrompt(java.lang.String)">setAccountPrompt</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#setMaxRetryTimes(int)">setMaxRetryTimes</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#setPasswordAlgorithm(java.lang.String)">setPasswordAlgorithm</A>, <A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#setPasswordPrompt(java.lang.String)">setPasswordPrompt</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="GenericDbLogin()"><!-- --></A><H3>
GenericDbLogin</H3>
<PRE>
public <B>GenericDbLogin</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getDatabase()"><!-- --></A><H3>
getDatabase</H3>
<PRE>
public java.lang.String <B>getDatabase</B>()</PRE>
<DL>
<DD>获取用户存放数据库,是ARE DBService的逻辑数据库
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the database</DL>
</DD>
</DL>
<HR>

<A NAME="setDatabase(java.lang.String)"><!-- --></A><H3>
setDatabase</H3>
<PRE>
public void <B>setDatabase</B>(java.lang.String&nbsp;database)</PRE>
<DL>
<DD>设置用户存放数据库,是ARE DBService的逻辑数据库
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>database</CODE> - the database to set</DL>
</DD>
</DL>
<HR>

<A NAME="getDbEncoding()"><!-- --></A><H3>
getDbEncoding</H3>
<PRE>
public java.lang.String <B>getDbEncoding</B>()</PRE>
<DL>
<DD>获取数据库的编码格式
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the dbEncoding</DL>
</DD>
</DL>
<HR>

<A NAME="setDbEncoding(java.lang.String)"><!-- --></A><H3>
setDbEncoding</H3>
<PRE>
public void <B>setDbEncoding</B>(java.lang.String&nbsp;dbEncoding)</PRE>
<DL>
<DD>设置数据库的编码格式
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dbEncoding</CODE> - the dbEncoding to set</DL>
</DD>
</DL>
<HR>

<A NAME="getIdColumn()"><!-- --></A><H3>
getIdColumn</H3>
<PRE>
public java.lang.String <B>getIdColumn</B>()</PRE>
<DL>
<DD>获取user id的字段
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the idColumn</DL>
</DD>
</DL>
<HR>

<A NAME="setIdColumn(java.lang.String)"><!-- --></A><H3>
setIdColumn</H3>
<PRE>
public void <B>setIdColumn</B>(java.lang.String&nbsp;idColumn)</PRE>
<DL>
<DD>设置user id的字段
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>idColumn</CODE> - the idColumn to set</DL>
</DD>
</DL>
<HR>

<A NAME="getNameColumn()"><!-- --></A><H3>
getNameColumn</H3>
<PRE>
public java.lang.String <B>getNameColumn</B>()</PRE>
<DL>
<DD>获取用户名称的字段
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the nameColumn</DL>
</DD>
</DL>
<HR>

<A NAME="setNameColumn(java.lang.String)"><!-- --></A><H3>
setNameColumn</H3>
<PRE>
public void <B>setNameColumn</B>(java.lang.String&nbsp;nameColumn)</PRE>
<DL>
<DD>设置用户名称的字段
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nameColumn</CODE> - the nameColumn to set</DL>
</DD>
</DL>
<HR>

<A NAME="getPasswordColumn()"><!-- --></A><H3>
getPasswordColumn</H3>
<PRE>
public java.lang.String <B>getPasswordColumn</B>()</PRE>
<DL>
<DD>获取用户密码的字段
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the passwordColumn</DL>
</DD>
</DL>
<HR>

<A NAME="setPasswordColumn(java.lang.String)"><!-- --></A><H3>
setPasswordColumn</H3>
<PRE>
public void <B>setPasswordColumn</B>(java.lang.String&nbsp;passwordColumn)</PRE>
<DL>
<DD>设置用户密码的字段
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>passwordColumn</CODE> - the passwordColumn to set</DL>
</DD>
</DL>
<HR>

<A NAME="getPropertyColumns()"><!-- --></A><H3>
getPropertyColumns</H3>
<PRE>
public java.lang.String <B>getPropertyColumns</B>()</PRE>
<DL>
<DD>获取用户属性的字段列表。属性字段列表是一系列的字段或者字段别名的列表，如：attr1,attr2,attr3,xxx as attr4..等。
 字段列表最终会以大写的形式作为属性放进登录的用户中，登录后任务程序可以用user.getProperty("ATTR1")来获取attr1的值。
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the propertyColumns</DL>
</DD>
</DL>
<HR>

<A NAME="setPropertyColumns(java.lang.String)"><!-- --></A><H3>
setPropertyColumns</H3>
<PRE>
public void <B>setPropertyColumns</B>(java.lang.String&nbsp;propertyColumns)</PRE>
<DL>
<DD>设置用户属性的字段列表。属性字段列表是一系列的字段或者字段别名的列表，如：attr1,attr2,attr3,xxx as attr4..等。
 字段列表最终会以大写的形式作为属性放进登录的用户中，登录后任务程序可以用user.getProperty("ATTR1")来获取attr1的值。
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>propertyColumns</CODE> - the propertyColumns to set</DL>
</DD>
</DL>
<HR>

<A NAME="getValidAccountFilter()"><!-- --></A><H3>
getValidAccountFilter</H3>
<PRE>
public java.lang.String <B>getValidAccountFilter</B>()</PRE>
<DL>
<DD>获取有效帐号状态过滤器，过滤器应该是一个合法的sql条件。只有符合此条件的记录才会从数据库中检索出来。
 常见的形式如：status='1'、avalibleFlag='Y'等，也可以是一个复杂的sql条件。
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the validStatusFilter</DL>
</DD>
</DL>
<HR>

<A NAME="setValidAccountFilter(java.lang.String)"><!-- --></A><H3>
setValidAccountFilter</H3>
<PRE>
public void <B>setValidAccountFilter</B>(java.lang.String&nbsp;validAccountFilter)</PRE>
<DL>
<DD>设置有效帐号状态过滤器，过滤器应该是一个合法的sql条件。只有符合此条件的记录才会从数据库中检索出来。
 常见的形式如：status='1'、avalibleFlag='Y'等，也可以是一个复杂的sql条件。
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>validAccountFilter</CODE> - the validAccountFilter to set</DL>
</DD>
</DL>
<HR>

<A NAME="getTable()"><!-- --></A><H3>
getTable</H3>
<PRE>
public java.lang.String <B>getTable</B>()</PRE>
<DL>
<DD>获取存放用户信息的表
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the table</DL>
</DD>
</DL>
<HR>

<A NAME="setTable(java.lang.String)"><!-- --></A><H3>
setTable</H3>
<PRE>
public void <B>setTable</B>(java.lang.String&nbsp;table)</PRE>
<DL>
<DD>设置存放用户信息的表
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>table</CODE> - the table to set</DL>
</DD>
</DL>
<HR>

<A NAME="getAccountColumn()"><!-- --></A><H3>
getAccountColumn</H3>
<PRE>
public java.lang.String <B>getAccountColumn</B>()</PRE>
<DL>
<DD>获取登录帐号字段。逻辑上，登录帐号字段可以不是user id字段，这个字段用来确定登录记录在数据表中的存在性。例如loginid而不一定是userid
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the accountColumn</DL>
</DD>
</DL>
<HR>

<A NAME="setAccountColumn(java.lang.String)"><!-- --></A><H3>
setAccountColumn</H3>
<PRE>
public void <B>setAccountColumn</B>(java.lang.String&nbsp;accountColumn)</PRE>
<DL>
<DD>设置登录帐号字段。逻辑上，登录帐号字段可以不是user id字段，这个字段用来确定登录记录在数据表中的存在性。例如loginid而不一定是userid
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>accountColumn</CODE> - the accountColumn to set</DL>
</DD>
</DL>
<HR>

<A NAME="login(com.amarsoft.task.Task, java.lang.String, java.lang.String)"><!-- --></A><H3>
login</H3>
<PRE>
protected final <A HREF="../../../../../com/amarsoft/task/security/TaskUser.html" title="interface in com.amarsoft.task.security">TaskUser</A> <B>login</B>(<A HREF="../../../../../com/amarsoft/task/Task.html" title="class in com.amarsoft.task">Task</A>&nbsp;task,
                               java.lang.String&nbsp;account,
                               java.lang.String&nbsp;password)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html" title="class in com.amarsoft.task.security.login">AbstractAccountPasswordLogin</A></CODE></B></DD>
<DD>使用帐号户和密码登录到系统，传入的参数包括帐号，密码，密码的加密形式
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html#login(com.amarsoft.task.Task, java.lang.String, java.lang.String)">login</A></CODE> in class <CODE><A HREF="../../../../../com/amarsoft/task/security/login/AbstractAccountPasswordLogin.html" title="class in com.amarsoft.task.security.login">AbstractAccountPasswordLogin</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>task</CODE> - 登录任务<DD><CODE>account</CODE> - 帐号<DD><CODE>password</CODE> - 密码
<DT><B>Returns:</B><DD>登录成功后返回一个用户，否则返回null</DL>
</DD>
</DL>
<HR>

<A NAME="isValidUser(java.lang.String, java.lang.String, java.lang.String, com.amarsoft.task.security.TaskUser)"><!-- --></A><H3>
isValidUser</H3>
<PRE>
protected boolean <B>isValidUser</B>(java.lang.String&nbsp;loginAccount,
                              java.lang.String&nbsp;loginPassword,
                              java.lang.String&nbsp;dbPassword,
                              <A HREF="../../../../../com/amarsoft/task/security/TaskUser.html" title="interface in com.amarsoft.task.security">TaskUser</A>&nbsp;tempUser)</PRE>
<DL>
<DD>确定该帐号是否合法，需要根据登录输入的帐户、登录输入的密码和数据库中的密码，数据库中用的信息（存放在tempUser中）确定是否合法。
 <p>基本的实现完成下面的验证逻辑：
 <ul>
 <li>如果从数据库中获取的用户ID，即（tempUser.getId()）为null，返回false
 <li>如果登录密码和数据库密码一个为null，另一个不为null,即((loginPassword==null) ^ (dbPassword==null))，返回false
 <li>如果登录密码和数据库密码同时为null，即((loginPassword==null) && (dbPassword==null))返回true
 <li>如果数据库密码和登录密码或者登录密码的加密形式相同，则返回true。即return dbPassword.equals(loginPassword) || dbPassword.equals(getEncryptString(loginPassword))
 <ul>
 传入的参数值tempUser实际上包含了数据库用户中除了密码外的所有可定义信息，可通过getId(),getName(),getProperty(),getProperties()获取得到更多信息用于验证。
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>loginAccount</CODE> - login的帐号<DD><CODE>loginPassword</CODE> - login的密码<DD><CODE>dbPassword</CODE> - 数据库中的秘密字符串<DD><CODE>tempUser</CODE> - 从数据库返回的信息构造的临时的用户
<DT><B>Returns:</B><DD>用户合法，返回true，否则返回false</DL>
</DD>
</DL>
<HR>

<A NAME="getQuerySql()"><!-- --></A><H3>
getQuerySql</H3>
<PRE>
protected final java.lang.String <B>getQuerySql</B>()</PRE>
<DL>
<DD>根据配置的参数获取查询数据库的语句。当参数变化的时候，查询语句会重新构造，否则直接返回。
<P>
<DD><DL>

<DT><B>Returns:</B><DD>查询语句</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/GenericDbLogin.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/amarsoft/task/security/login/AnonymousLogin.html" title="class in com.amarsoft.task.security.login"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="GenericDbLogin.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<i>Copyright &#169; 2007 Amarsoft Technology Co.,Ltd. All Rights Reserved.</i>
</BODY>
</HTML>
